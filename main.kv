# main.kv

<InitialScreen>:
    name: "initial_screen"
    MDScreen:
        MDBottomNavigation:
            selected_color_background: app.theme_cls.primary_color
            text_color_active: "lightgrey"

            #Primera pantalla
            MDBottomNavigationItem:
                name: 'screen_two'
                text: 'Conexión'
                icon: 'connection'
                #on_tab_release: screen_manager.current = 'screen_two'

                GridLayout:
                    cols: 1
                    size_hint_y: None
                    height: root.height

                    MDLabel:
                        text: ''
                        halign: 'center'

                    #Texto
                    MDLabel:
                        text: 'Presiona Actualizar para obtener la lista de dispositivos conectados.'
                        halign: 'center'

                    #Botones
                    GridLayout:
                        cols: 3
                        row_default_height: dp(48)  # Adjust the height as needed
                        spacing: dp(10)
                        padding: dp(30), 0

                        MDRaisedButton:
                            id: update_button
                            text: 'Actualizar'
                            on_release: app.update_button_pressed()

                        MDRaisedButton:
                            id: button
                            text: "Seleccionar"
                            size_hint_x: 2
                        
                        MDRaisedButton:
                            id: update_button
                            text: 'Conectar'
                            on_release: app.connect_button_pressed()

                    MDLabel:
                        text: "Row3"
                        halign: 'center'

                    MDLabel:
                        text: "Row4"
                        halign: 'center'
                    
                    MDLabel:
                        text: "Row5"
                        halign: 'center'
                        

            #Segunda Pantalla
            MDBottomNavigationItem:
                name: 'screen_one'
                text: 'Dispositivo'
                icon: 'typewriter'
                #on_tab_release: screen_manager.current = 'screen_one'
                #Vertical todo, ultimos dos tienen dos horizontal o grid 2 col
                
                BoxLayout:
                    orientation: 'vertical'
                    spacing: 10
                    padding: [10, 10, 10, 10]
            
                    BoxLayout:
                        orientation: 'horizontal'
                        spacing: 10

                        AsyncImage:
                            size_hint: 0.8, 1
                            source: 'src/SecScrBanner01.png'                       
                           
                        MDRoundFlatIconButton:
                            text: "Añadir"
                            #text_color: "white"
                            icon: 'plus'
                            on_release: app.on_icon_button_press()

                    BoxLayout:
                        orientation: 'horizontal'
                        spacing: 10
                            
                        BoxLayout:
                            size_hint: 0.4, 1
                            orientation: 'vertical'
                            spacing: 10

                            MDRaisedButton:
                                id: s1_update
                                text: 'Actualizar'
                                disabled: False
                                size_hint_y: .4
                                size_hint_x: 1
                                on_release: app.update_ip_device()

                            MDRaisedButton:
                                id: s1_connect
                                text: 'CONECTAR'
                                disabled: True
                                size_hint_y: .6
                                size_hint_x: 1
                                on_release: app.connect_device()
                        
                        AsyncImage:
                            size_hint: 0.6, 1
                            source: 'src/SecScrBanner02.png'  
                    
                    BoxLayout:
                        orientation: 'horizontal'
                        spacing: 10
                        
                        AsyncImage:
                            source: 'http://placehold.it/480x270.png&text=slide-4.png'
                            size_hint: .3, 1
                        
                        MDRaisedButton:
                            id: s1_b6
                            text: 'Bts scan connect'
                            size_hint: .7, 1

            #Tercera pantalla
            MDBottomNavigationItem:
                name: 'screen_three'
                text: 'Config.'
                icon: 'cog'
                #on_tab_release: screen_manager.current = 'screen_three'
                
                MDScreen:
                    MDLabel:
                        text: 'Screen three Content'

<IoTScreen>:
    name: "iot_screen"
    MDScreen:
        BoxLayout:
            orientation: 'vertical'
            spacing: 20
            padding: [10, 10, 10, 10]
            
            BoxLayout:
                size_hint: 1, .3
                orientation: 'horizontal'
                spacing: 10
                
                MDFillRoundFlatIconButton:
                    size_hint: None, None
                    size: "100dp", "50dp"
                    text: "Volver"
                    icon: 'chevron-left'
                    md_bg_color: app.theme_cls.bg_light
                    on_release: app.on_goback_button_press()


                MDLabel:
                    text: "Configuración inicial (1/3)"
                    halign: "center"
                    font_style: "H6"

            Image:
                source: 'src/router.png'
                size_hint: 1, 1
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}  # Center the image
                fit_mode: "contain" 

            MDLabel:
                text: "Coloca las credenciales de la red Wifi a la que se conectará la máquina"
                halign: "center"

            MDTextField:
                id: ssid
                hint_text: "Enter WiFi SSID"
            GridLayout:
                cols: 2
                MDTextField:
                    id: passw
                    hint_text: "Enter WiFi Password"
                    password: True  # Set to True to initially mask the password
                    password_mask: '*'
                MDIconButton:
                    id: passw_eye
                    icon: 'eye-off'
                    on_release: root.toggle_password_visibility()

            MDRaisedButton:
                size_hint: None, None
                size: "200dp", "50dp"
                pos_hint: {"center_x": 0.5, "center_y": 0.5}  # Center the button
                text: "Siguiente"
                on_release: root.on_submit_button_press()

<IoTInfoScreen>:
    name: "iotinfo_screen"
    MDScreen:
        BoxLayout:
            orientation: 'vertical'
            spacing: 20
            padding: [10, 10, 10, 10]
            
            BoxLayout:
                size_hint_y: 0.2
                orientation: 'horizontal'
                spacing: 10
                
                MDFillRoundFlatIconButton:
                    size_hint: None, None
                    size: "100dp", "50dp"
                    text: "Volver"
                    size: "100dp", "50dp"
                    icon: 'chevron-left'
                    md_bg_color: app.theme_cls.bg_light
                    on_release: app.on_goback_button_press()


                MDLabel:
                    text: "Configuración inicial (2/3)"
                    halign: "center"
                    font_style: "H6"

            Carousel:
                size_hint_y: 0.6
                direction: 'right'
                AsyncImage:
                    source: 'src/Wifi_01.png'
                AsyncImage:
                    source: 'src/Wifi_02.png'
                AsyncImage:
                    source: 'src/Wifi_03.png'
                AsyncImage:
                    source: 'src/Wifi_04.png'
                AsyncImage:
                    source: 'src/Wifi_05.png'
                AsyncImage:
                    source: 'src/Wifi_06.png'

            BoxLayout:
                size_hint_y: 0.2
                orientation: 'vertical'
                spacing: 10

                MDLabel:
                    text: 'Ahora conectate a la red Wifi de la Maquina. Debe ser "TypeTurbo", y presiona siguiente.'
                    halign: "center"

            MDRaisedButton:
                id: tolink_btn
                size_hint: None, None
                size: "200dp", "50dp"
                pos_hint: {"center_x": 0.5, "center_y": 0.5}  # Center the button
                text: "Siguiente"
                on_release: root.on_tolink_btn_press()

<LinkingScreen>:
    name: "linking_screen"
    MDScreen:
        BoxLayout:
            orientation: 'vertical'
            spacing: 20
            padding: [10, 10, 10, 10]
            
            BoxLayout:
                size_hint: 1, .3
                orientation: 'horizontal'
                spacing: 10
                
                MDFillRoundFlatIconButton:
                    text: "Volver"
                    size_hint: None, None
                    size: "100dp", "50dp"
                    icon: 'chevron-left'
                    md_bg_color: app.theme_cls.bg_light
                    on_release: app.on_goback_button_press()

                MDLabel:
                    text: "Configuración inicial (3/3)"
                    halign: "center"
                    font_style: "H6"

            Carousel:
                id: link_car
                direction: 'right'
                swipe_distance: 0
                AsyncImage:
                    source: 'src/DC_00.png'
                AsyncImage:
                    source: 'src/DC_01.png'
                AsyncImage:
                    source: 'src/DC_02.png'
                AsyncImage:
                    source: 'src/DC_03.png'
                AsyncImage:
                    source: 'src/DC_04.png'

            MDProgressBar:
                id: progress_bar
                size_hint_y: None
                height: "8dp"
                max: 100
                value: 0

            MDRaisedButton:
                id: tolink_btn
                size_hint: None, None
                size: "200dp", "50dp"
                pos_hint: {"center_x": 0.5, "center_y": 0.5}  # Center the button
                text: "Proceso automático"
                